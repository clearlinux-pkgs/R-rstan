#
# This file is auto-generated. DO NOT EDIT
# Generated by: autospec.py
# Using build pattern: R
# autospec version: v2
# autospec commit: e661f3a
#
Name     : R-rstan
Version  : 2.32.3
Release  : 66
URL      : https://cran.r-project.org/src/contrib/rstan_2.32.3.tar.gz
Source0  : https://cran.r-project.org/src/contrib/rstan_2.32.3.tar.gz
Summary  : R Interface to Stan
Group    : Development/Tools
License  : GPL-3.0
Requires: R-rstan-lib = %{version}-%{release}
Requires: R-BH
Requires: R-QuickJSR
Requires: R-Rcpp
Requires: R-RcppEigen
Requires: R-RcppParallel
Requires: R-StanHeaders
Requires: R-ggplot2
Requires: R-gridExtra
Requires: R-inline
Requires: R-loo
Requires: R-pkgbuild
BuildRequires : R-BH
BuildRequires : R-QuickJSR
BuildRequires : R-Rcpp
BuildRequires : R-RcppEigen
BuildRequires : R-RcppParallel
BuildRequires : R-StanHeaders
BuildRequires : R-coda
BuildRequires : R-ggplot2
BuildRequires : R-gridExtra
BuildRequires : R-inline
BuildRequires : R-loo
BuildRequires : R-pkgbuild
BuildRequires : buildreq-R

%description
estimate, and analyze Stan models by accessing the header-only Stan library
    provided by the 'StanHeaders' package. The Stan project develops a probabilistic
    programming language that implements full Bayesian statistical inference
    via Markov Chain Monte Carlo, rough Bayesian inference via 'variational'
    approximation, and (optionally penalized) maximum likelihood estimation via
    optimization. In all three cases, automatic differentiation is used to quickly
    and accurately evaluate gradients without burdening the user with the need to
    derive the partial derivatives.

%package lib
Summary: lib components for the R-rstan package.
Group: Libraries

%description lib
lib components for the R-rstan package.


%prep
%setup -q -n rstan
pushd ..
cp -a rstan buildavx2
popd

%build
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
export LANG=C.UTF-8
export SOURCE_DATE_EPOCH=1701462364

%install
export SOURCE_DATE_EPOCH=1701462364
rm -rf %{buildroot}
LANG=C.UTF-8
CFLAGS="$CLEAR_INTERMEDIATE_CFLAGS -O3 -flto -fno-semantic-interposition "
FCFLAGS="$CLEAR_INTERMEDIATE_FFLAGS -O3 -flto -fno-semantic-interposition "
FFLAGS="$CLEAR_INTERMEDIATE_FFLAGS -O3 -flto -fno-semantic-interposition "
CXXFLAGS="$CLEAR_INTERMEDIATE_CXXFLAGS -O3 -flto -fno-semantic-interposition "
AR=gcc-ar
RANLIB=gcc-ranlib
LDFLAGS="$CLEAR_INTERMEDIATE_LDFLAGS  -Wl,-z -Wl,relro"
mkdir -p %{buildroot}/usr/lib64/R/library

mkdir -p ~/.R
mkdir -p ~/.stash
echo "CFLAGS = $CFLAGS -march=x86-64-v3 -ftree-vectorize -mno-vzeroupper" > ~/.R/Makevars
echo "FFLAGS = $FFLAGS -march=x86-64-v3 -ftree-vectorize -mno-vzeroupper " >> ~/.R/Makevars
echo "CXXFLAGS = $CXXFLAGS -march=x86-64-v3 -ftree-vectorize -mno-vzeroupper " >> ~/.R/Makevars
R CMD INSTALL --install-tests --use-LTO --built-timestamp=${SOURCE_DATE_EPOCH} --data-compress=none --compress=none --build  -l %{buildroot}/usr/lib64/R/library .
for i in `find %{buildroot}/usr/lib64/R/ -name "*.so"`; do mv $i $i.avx2 ; mv $i.avx2 ~/.stash/; done
echo "CFLAGS = $CFLAGS -march=x86-64-v4 -ftree-vectorize  -mno-vzeroupper -mprefer-vector-width=512 " > ~/.R/Makevars
echo "FFLAGS = $FFLAGS -march=x86-64-v4 -ftree-vectorize  -mno-vzeroupper -mprefer-vector-width=512 " >> ~/.R/Makevars
echo "CXXFLAGS = $CXXFLAGS -march=x86-64-v4 -ftree-vectorize -mno-vzeroupper -mprefer-vector-width=512  " >> ~/.R/Makevars
R CMD INSTALL --preclean --install-tests --use-LTO --no-test-load --data-compress=none --compress=none --built-timestamp=${SOURCE_DATE_EPOCH} --build  -l %{buildroot}/usr/lib64/R/library .
for i in `find %{buildroot}/usr/lib64/R/ -name "*.so"`; do mv $i $i.avx512 ; mv $i.avx512 ~/.stash/; done
echo "CFLAGS = $CFLAGS -ftree-vectorize " > ~/.R/Makevars
echo "FFLAGS = $FFLAGS -ftree-vectorize " >> ~/.R/Makevars
echo "CXXFLAGS = $CXXFLAGS -ftree-vectorize " >> ~/.R/Makevars
R CMD INSTALL --preclean --use-LTO --install-tests --data-compress=none --compress=none --built-timestamp=${SOURCE_DATE_EPOCH} --build  -l %{buildroot}/usr/lib64/R/library .
cp ~/.stash/* %{buildroot}/usr/lib64/R/library/*/libs/ || :
%{__rm} -rf %{buildroot}%{_datadir}/R/library/R.css
%check
export LANG=C.UTF-8
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
export _R_CHECK_FORCE_SUGGESTS_=false
R CMD check --no-manual --no-examples --no-codoc . || :

/usr/bin/elf-move.py avx2 %{buildroot}-v3 %{buildroot} %{buildroot}/usr/share/clear/filemap/filemap-%{name}

%files
%defattr(-,root,root,-)
/usr/lib64/R/library/rstan/CITATION
/usr/lib64/R/library/rstan/DESCRIPTION
/usr/lib64/R/library/rstan/INDEX
/usr/lib64/R/library/rstan/Meta/Rd.rds
/usr/lib64/R/library/rstan/Meta/features.rds
/usr/lib64/R/library/rstan/Meta/hsearch.rds
/usr/lib64/R/library/rstan/Meta/links.rds
/usr/lib64/R/library/rstan/Meta/nsInfo.rds
/usr/lib64/R/library/rstan/Meta/package.rds
/usr/lib64/R/library/rstan/Meta/vignette.rds
/usr/lib64/R/library/rstan/NAMESPACE
/usr/lib64/R/library/rstan/NEWS
/usr/lib64/R/library/rstan/R/rstan
/usr/lib64/R/library/rstan/R/rstan.rdb
/usr/lib64/R/library/rstan/R/rstan.rdx
/usr/lib64/R/library/rstan/R/sysdata.rdb
/usr/lib64/R/library/rstan/R/sysdata.rdx
/usr/lib64/R/library/rstan/doc/SBC.R
/usr/lib64/R/library/rstan/doc/SBC.Rmd
/usr/lib64/R/library/rstan/doc/SBC.html
/usr/lib64/R/library/rstan/doc/external.R
/usr/lib64/R/library/rstan/doc/external.Rmd
/usr/lib64/R/library/rstan/doc/external.html
/usr/lib64/R/library/rstan/doc/fib.hpp
/usr/lib64/R/library/rstan/doc/index.html
/usr/lib64/R/library/rstan/doc/rstan.R
/usr/lib64/R/library/rstan/doc/rstan.Rmd
/usr/lib64/R/library/rstan/doc/rstan.bib
/usr/lib64/R/library/rstan/doc/rstan.html
/usr/lib64/R/library/rstan/doc/schools.stan
/usr/lib64/R/library/rstan/doc/sinc.hpp
/usr/lib64/R/library/rstan/doc/stanfit-objects.R
/usr/lib64/R/library/rstan/doc/stanfit-objects.Rmd
/usr/lib64/R/library/rstan/doc/stanfit-objects.html
/usr/lib64/R/library/rstan/exec/stanc.js
/usr/lib64/R/library/rstan/help/AnIndex
/usr/lib64/R/library/rstan/help/aliases.rds
/usr/lib64/R/library/rstan/help/figures/stanlogo.png
/usr/lib64/R/library/rstan/help/paths.rds
/usr/lib64/R/library/rstan/help/rstan.rdb
/usr/lib64/R/library/rstan/help/rstan.rdx
/usr/lib64/R/library/rstan/html/00Index.html
/usr/lib64/R/library/rstan/html/R.css
/usr/lib64/R/library/rstan/include/exporter.h
/usr/lib64/R/library/rstan/include/rstan/boost_random_R.hpp
/usr/lib64/R/library/rstan/include/rstan/comment_writer.hpp
/usr/lib64/R/library/rstan/include/rstan/filtered_values.hpp
/usr/lib64/R/library/rstan/include/rstan/io/r_ostream.hpp
/usr/lib64/R/library/rstan/include/rstan/io/rlist_ref_var_context.hpp
/usr/lib64/R/library/rstan/include/rstan/logger.hpp
/usr/lib64/R/library/rstan/include/rstan/rcpp_module_def_for_rstan.hpp
/usr/lib64/R/library/rstan/include/rstan/rstan_writer.hpp
/usr/lib64/R/library/rstan/include/rstan/rstaninc.hpp
/usr/lib64/R/library/rstan/include/rstan/stan_args.hpp
/usr/lib64/R/library/rstan/include/rstan/stan_fit.hpp
/usr/lib64/R/library/rstan/include/rstan/sum_values.hpp
/usr/lib64/R/library/rstan/include/rstan/value.hpp
/usr/lib64/R/library/rstan/include/rstan/values.hpp
/usr/lib64/R/library/rstan/include/rstan_next/stan_fit.hpp
/usr/lib64/R/library/rstan/include/rstan_next/stan_fit_base.hpp
/usr/lib64/R/library/rstan/lib/libStanServices.a
/usr/lib64/R/library/rstan/misc/rstan_doc_ex_1.csv
/usr/lib64/R/library/rstan/misc/rstan_doc_ex_2.csv
/usr/lib64/R/library/rstan/misc/rstan_doc_ex_3.csv
/usr/lib64/R/library/rstan/misc/rstan_doc_ex_4.csv
/usr/lib64/R/library/rstan/misc/rstan_doc_ex_incomplete_1.csv
/usr/lib64/R/library/rstan/misc/rstan_doc_ex_incomplete_2.csv
/usr/lib64/R/library/rstan/misc/stan_progress.html
/usr/lib64/R/library/rstan/tests/testthat.R
/usr/lib64/R/library/rstan/tests/testthat/blocker1.csv
/usr/lib64/R/library/rstan/tests/testthat/blocker2.csv
/usr/lib64/R/library/rstan/tests/testthat/test-chains.R
/usr/lib64/R/library/rstan/tests/testthat/test-check_hmc_diagnostics.R
/usr/lib64/R/library/rstan/tests/testthat/test-expose_dryRun.R
/usr/lib64/R/library/rstan/tests/testthat/test-extract_sparse_parts.R
/usr/lib64/R/library/rstan/tests/testthat/test-loo_moment_matching.R
/usr/lib64/R/library/rstan/tests/testthat/test-misc.R
/usr/lib64/R/library/rstan/tests/testthat/test-misc_inst.R
/usr/lib64/R/library/rstan/tests/testthat/test-options.R
/usr/lib64/R/library/rstan/tests/testthat/test-partial_inits.R
/usr/lib64/R/library/rstan/tests/testthat/test-read_stan_csv.R
/usr/lib64/R/library/rstan/tests/testthat/test-stan_args_hpp.R
/usr/lib64/R/library/rstan/tests/testthat/test-stan_csv.R
/usr/lib64/R/library/rstan/tests/testthat/test-stan_fun.R
/usr/lib64/R/library/rstan/tests/testthat/test-stan_rdump.R
/usr/lib64/R/library/rstan/tests/testthat/test-stanc.R
/usr/lib64/R/library/rstan/tests/testthat/test-stanfit.R
/usr/lib64/R/library/rstan/tests/testthat/test-stanfit_get.R
/usr/lib64/R/library/rstan/tests/testthat/test-stanmodel.R
/usr/lib64/R/library/rstan/tests/testthat/test_fit_diagnostics.csv
/usr/lib64/R/library/rstan/unitTests/test_r_ostream.R
/usr/lib64/R/library/rstan/unitTests/test_rlist_ref_var_context.R
/usr/lib64/R/library/rstan/unitTests/test_rlist_ref_var_context.cpp

%files lib
%defattr(-,root,root,-)
/usr/lib64/R/library/rstan/libs/rstan.so
/usr/lib64/R/library/rstan/libs/rstan.so.avx2
/usr/lib64/R/library/rstan/libs/rstan.so.avx512
